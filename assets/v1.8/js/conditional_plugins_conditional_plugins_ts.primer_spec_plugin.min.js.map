{"version":3,"file":"conditional_plugins_conditional_plugins_ts.primer_spec_plugin.min.js","mappings":";;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACwD;AACb;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,qEAAgB,8BAA8B,wDAAU;AACzG;AACP;AACA;AACA;AACA,KAAK;AACL;;;;;;;;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA,4BAA4B,qOAAoC;AAChE;AACA;AACA,4BAA4B,yQAAgD;AAC5E;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACpBkE;AACgB;AAC3E;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,wEAAc,GAAG,OAAO,oEAAc,WAAW,IAAI,OAAO,oEAAc,YAAY;AACtG,gBAAgB,+FAAyB;AACzC;AACA,mBAAmB,wEAAc,GAAG,OAAO,mEAAa,YAAY,IAAI,OAAO,oEAAc,WAAW;AACxG;AACA;AACA;AACA,gBAAgB,wEAAc,GAAG,OAAO,iEAAW,WAAW,IAAI,OAAO,iEAAW,YAAY;AAChG,gBAAgB,+FAAyB;AACzC;AACA,mBAAmB,wEAAc,GAAG,OAAO,iEAAW,YAAY,IAAI,OAAO,iEAAW,WAAW;AACnG;AACA;AACA;AACA;AACA,oEAAoE,SAAS;AAC7E;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AClCO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sBAAsB;AACvB;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACnCO;AACP;AACA,2CAA2C,SAAS;AACpD,oBAAoB,QAAQ;AAC5B","sources":["webpack:///./conditional_plugins/conditional_plugins.ts","webpack:///./conditional_plugins/load_plugin.ts","webpack:///./conditional_plugins/should_load_plugin.ts","webpack:///./conditional_plugins/utils/is_today_in_range.ts","webpack:///./conditional_plugins/utils/print_enabling_url_to_console.ts"],"sourcesContent":["/**\n * Conditional plugins are loaded asynchronously and are intentionally\n * isolated from the rest of Primer Spec. This is because this conditional\n * plugin framework was designed to build temporary pranks and jokes! (We don't\n * want these jokes to affect the page load time and the spec-reading\n * experience.)\n *\n * Plugins run based on conditions defined in the `shouldLoadPlugin()` method.\n * They can also be force-enabled by inserting\n * `?enable_<plugin_id>=1` in the URL.\n */\nimport { shouldLoadPlugin } from './should_load_plugin';\nimport { loadPlugin } from './load_plugin';\n/**\n * When adding a new Plugin:\n * 1. Add the plugin definition to `./plugins/[your-plugin].plugin.ts`\n * 2. Choose a plugin ID, then add it to this list\n * 3. Add a condition to `shouldLoadPlugin()` for this plugin ID\n * 4. Update `loadPlugin()` to load the plugin definition from (1)\n */\nconst PLUGIN_IDS = ['halloween', 'april_fools_languages'];\nconst pluginsPromises = PLUGIN_IDS.filter((pluginId) => shouldLoadPlugin(pluginId)).map((pluginId) => loadPlugin(pluginId));\nexport async function executePlugins(input) {\n    const plugins = await Promise.all(pluginsPromises);\n    await Promise.all(plugins.map(async (plugin) => {\n        await plugin?.(input);\n    }));\n}\n","/**\n * Given a plugin ID, lazy-load the appropriate JS module containing the plugin\n * definition and return the plugin.\n *\n * Notice that we use the dynamic `import()` syntax. Webpack identifies this as\n * an opportunity to split the JS bundle, hence decreasing the size of the main\n * Primer Spec JS bundle. Additionally, we won't download the JS code for all\n * plugins, only the ones that need to run.\n */\nexport async function loadPlugin(pluginId) {\n    let plugin = null;\n    switch (pluginId) {\n        case 'halloween':\n            plugin = (await import('./plugins/halloween.plugin')).default;\n            break;\n        case 'april_fools_languages':\n            plugin = (await import('./plugins/april_fools_languages.plugin')).default;\n            break;\n    }\n    return plugin;\n}\n","import { isTodayInRange, Month } from './utils/is_today_in_range';\nimport { printEnablingURLToConsole } from './utils/print_enabling_url_to_console';\nexport function shouldLoadPlugin(pluginId) {\n    if (window.PrimerSpecConfig.disableJokes) {\n        return false;\n    }\n    const forceEnableOption = pluginForceEnableOption(pluginId);\n    if (forceEnableOption !== null) {\n        return forceEnableOption;\n    }\n    switch (pluginId) {\n        case 'halloween':\n            // Console message if we are *just* past the Halloween-mode end-date.\n            // From November 5 until November 15.\n            if (isTodayInRange({ month: Month.NOVEMBER, date: 5 }, { month: Month.NOVEMBER, date: 16 })) {\n                printEnablingURLToConsole(pluginId, \"ðŸ¤« Psst... It's well past halloween, but you can re-enable halloween mode by clicking this url:\");\n            }\n            return isTodayInRange({ month: Month.OCTOBER, date: 25 }, { month: Month.NOVEMBER, date: 5 });\n        case 'april_fools_languages':\n            // Console message if we are *just* past the April Fools end-date.\n            // From April 4 until April 13.\n            if (isTodayInRange({ month: Month.APRIL, date: 4 }, { month: Month.APRIL, date: 13 })) {\n                printEnablingURLToConsole(pluginId, \"ðŸ¤« Psst... It's well past April Fools, but you can re-enable the April Fools Language prank by clicking this url:\");\n            }\n            return isTodayInRange({ month: Month.MARCH, date: 29 }, { month: Month.APRIL, date: 4 });\n    }\n    return false;\n}\nfunction pluginForceEnableOption(pluginId) {\n    const match = window.location.search.match(new RegExp(`enable_${pluginId}=([0|1])`));\n    if (match) {\n        return match[1] === '1';\n    }\n    return null;\n}\n","export var Month;\n(function (Month) {\n    Month[Month[\"JANUARY\"] = 0] = \"JANUARY\";\n    Month[Month[\"FEBRUARY\"] = 1] = \"FEBRUARY\";\n    Month[Month[\"MARCH\"] = 2] = \"MARCH\";\n    Month[Month[\"APRIL\"] = 3] = \"APRIL\";\n    Month[Month[\"MAY\"] = 4] = \"MAY\";\n    Month[Month[\"JUNE\"] = 5] = \"JUNE\";\n    Month[Month[\"JULY\"] = 6] = \"JULY\";\n    Month[Month[\"AUGUST\"] = 7] = \"AUGUST\";\n    Month[Month[\"SEPTEMBER\"] = 8] = \"SEPTEMBER\";\n    Month[Month[\"OCTOBER\"] = 9] = \"OCTOBER\";\n    Month[Month[\"NOVEMBER\"] = 10] = \"NOVEMBER\";\n    Month[Month[\"DECEMBER\"] = 11] = \"DECEMBER\";\n})(Month || (Month = {}));\n/**\n * Return a boolean indicating whether today's date is between the dates\n * `lowerBound` (inclusive) and `upperBound` (exclusive).\n *\n * KNOWN LIMITATION: Doesn't work across years (for instance, around New Year).\n */\nexport function isTodayInRange(lowerBound, upperBound) {\n    const today = new Date();\n    if (today.getMonth() < lowerBound.month) {\n        return false;\n    }\n    let beyondLowerBound = true;\n    if (today.getMonth() === lowerBound.month) {\n        beyondLowerBound = today.getDate() >= lowerBound.date;\n    }\n    if (today.getMonth() !== upperBound.month) {\n        return today.getMonth() < upperBound.month;\n    }\n    const withinUpperBound = today.getDate() < upperBound.date;\n    return beyondLowerBound && withinUpperBound;\n}\n","export function printEnablingURLToConsole(pluginId, message) {\n    const enabled_url = new URL(window.location.href);\n    enabled_url.searchParams.set(`enable_${pluginId}`, '1');\n    console.info(`${message}\\n`, enabled_url.toString());\n}\n"],"names":[],"sourceRoot":""}