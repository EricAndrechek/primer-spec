---
version_string: v1.3
---
<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
{% seo %}
        <!-- BEGIN CUSTOM SPEC CODE -->
        {% if jekyll.environment == "dev" %}
            {% assign base_url = "http://localhost:4000" %}
        {% elsif jekyll.environment == "site-preview" %}
            {% assign url_size = site.url | size | minus: 1 %}    
            {% assign base_url = site.url | slice: 0, url_size %}
        {% else %}
            {% assign base_url = "https://eecs485staff.github.io/primer-spec" %}
        {% endif %}
        <link rel="stylesheet" href="{{ base_url }}/assets/{{ layout.version_string }}/css/primer-spec-base.css">
        <link rel="preload" href="{{ base_url }}/assets/{{ layout.version_string }}/js/primer_spec_plugin.min.js" as="script" crossorigin>

        {%- if page.latex %}
        <style>
            /**
             * To make MathJax CHTML scroll like other large Primer Spec
             * code-blocks, we need to set the `overflow` property on
             * `mjx-container` elements.
             */
            mjx-container {
                overflow: auto;
                overflow-y: hidden;
            }
        </style>
        {%- endif %}
        <!-- END CUSTOM SPEC CODE -->
    </head>
    <body>
        <!-- Actual content -->
        <!-- 
            The explicit onClick handler is needed to force Safari (iOS) to propagate
            click events for the sidebar.
        -->
        <div id="primer-spec-plugin-main-content" onClick="return true;">
            {% if site.title and site.title != page.title %}
            <h1 class="primer-spec-toc-ignore"><a href="{{ "/" | absolute_url }}">{{ site.title }}</a></h1>
            {% endif %}

            {{ content }}

            {% if site.github.private != true and site.github.license %}
            <div class="footer border-top border-gray-light mt-5 pt-3 text-right text-gray">
                This site is open source. {% github_edit_link "Improve this page" %}.
            </div>
            {% endif %}
        </div> <!-- .container-lg -->

        {% if site.google_analytics %}
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            ga('create', '{{ site.google_analytics }}', 'auto');
            ga('send', 'pageview');
        </script>
        {% endif %}

        <!-- BEGIN CUSTOM SPEC CODE -->
        <script src="{{ base_url }}/assets/{{ layout.version_string }}/js/primer_spec_plugin.min.js" crossorigin="anonymous"></script>
        {%- if page.latex %}
        <script>
            // This config was derived from the config TeX-MML-AM_CHTML, but
            // disables the context-menu (which appears on right-click). It also
            // removes unnecessary input formats MML and AM.
            // Additionally, since Kramdown (the Markdown renderer) embeds
            // LaTeX in special script tags compatible with MathJax v2, we
            // need to include a script to "find" the LaTeX to render.
            // Source: https://github.com/mathjax/MathJax/issues/2220#issuecomment-542963972
            window.MathJax = {
                options: {
                    renderActions: {
                        addMenu: [],
                        checkLoading: [],
                        find: [
                            10,
                            function (doc) {
                                for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
                                    const display = !!node.type.match(/; *mode=display/);
                                    const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                                    const text = document.createTextNode('');
                                    node.parentNode.replaceChild(text, node);
                                    math.start = {node: text, delim: '', n: 0};
                                    math.end = {node: text, delim: '', n: 0};
                                    doc.math.push(math);
                                }
                            },
                            '',
                        ],
                    },
                    ignoreHtmlClass: 'tex2jax_ignore',
                    processHtmlClass: 'tex2jax_process'
                },
                tex: {
                    packages: ['base', 'ams', 'noerrors', 'noundefined']
                },
                loader: {
                    load: ['[tex]/noerrors']
                }
            };
            </script>
            <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" id="MathJax-script"></script>
        {%- endif %}
        <!-- END CUSTOM SPEC CODE -->
    </body>
</html>
