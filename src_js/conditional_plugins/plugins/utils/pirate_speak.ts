/**
 * The `pirate-speak` software was originally written by
 * Michael Hadley <michaelwesthadley@gmail.com>.
 * https://github.com/mikewesthad/pirate-speak
 *
 * The software was modified for use with Primer Spec.
 *
 * The original `pirate-speak` package was licensed under the MIT License,
 * included below:
 *
 *******************
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2015 Michael Hadley
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 *******************
 */

export const dictionary: { [englishWord: string]: string } = {
  address: "port o' call",
  admin: 'helm',
  am: 'be',
  an: 'a',
  and: "n'",
  are: 'be',
  award: 'prize',
  before: 'afore',
  belief: 'creed',
  between: 'betwixt',
  big: 'vast',
  bill: 'coin',
  bills: 'coins',
  boss: 'admiral',
  box: 'barrel',
  buddy: 'mate',
  business: 'company',
  businesses: 'companies',
  calling: "callin'",
  canada: 'Great North',
  cash: 'coin',
  cat: 'parrot',
  cheat: 'hornswaggle',
  comes: 'hails',
  comments: 'yer words',
  cool: 'shipshape',
  country: 'land',
  dashboard: 'shanty',
  dead: "in Davy Jones's Locker",
  disconnect: 'keelhaul',
  // do: "d'",
  dog: 'parrot',
  dollar: 'doubloon',
  dollars: 'doubloons',
  dude: 'pirate',
  employee: 'crew',
  everyone: 'all hands',
  eye: 'eye-patch',
  family: 'kin',
  fee: 'debt',
  food: 'grub',
  for: 'fer',
  friend: 'matey',
  friends: 'mateys',
  go: 'sail',
  good: 'jolly good',
  grave: "Davy Jones's Locker",
  group: 'maties',
  haha: 'yo ho',
  hahaha: 'yo ho ho',
  hahahaha: 'yo ho ho ho',
  hand: 'hook',
  happy: 'grog-filled',
  hello: 'ahoy',
  hey: 'ahoy',
  hi: 'ahoy',
  hotel: 'fleebag inn',
  i: 'me',
  "i'm": 'i be',
  'i’m': 'i be',
  internet: "series o' tubes",
  invalid: 'sunk',
  is: 'be',
  island: 'isle',
  "isn't": 'be not',
  'isn’t': 'be not',
  "it's": "'tis",
  'it’s': "'tis",
  jail: 'brig',
  kill: 'keelhaul',
  king: 'king',
  ladies: 'lasses',
  lady: 'lass',
  lawyer: 'scurvy land lubber',
  left: 'port',
  leg: 'peg',
  logout: 'walk the plank',
  lol: 'blimey',
  man: 'pirate',
  manager: 'admiral',
  money: 'doubloons',
  month: 'moon',
  my: 'me',
  never: 'nary',
  no: 'nay',
  not: 'nay',
  of: "o'",
  old: 'barnacle-covered',
  omg: 'shiver me timbers',
  over: "o'er",
  page: 'parchment',
  people: 'scallywags',
  person: 'scurvy dog',
  posted: 'tacked to the yardarm',
  president: 'king',
  prison: 'brig',
  quickly: 'smartly',
  really: 'verily',
  relative: 'kin',
  relatives: 'kin',
  religion: 'creed',
  restaurant: 'galley',
  right: 'starboard',
  rotf: "rollin' on the decks",
  say: 'cry',
  seconds: "ticks o' tha clock",
  shipping: 'cargo',
  small: 'puny',
  snack: 'grub',
  soldier: 'sailor',
  sorry: 'yarr',
  spouse: "ball 'n' chain",
  state: 'land',
  supervisor: "Cap'n",
  "that's": 'that be',
  // the: 'thar',
  thief: 'swoggler',
  them: "'em",
  // this: 'dis',
  to: "t'",
  together: "t'gether",
  treasure: 'booty',
  was: 'be',
  water: 'grog',
  we: 'our jolly crew',
  // "we're": "we's",
  // "we’re": "we's",
  with: "wit'",
  work: 'duty',
  yah: 'aye',
  yeah: 'aye',
  yes: 'aye',
  you: 'ye',
  "you're": 'you be',
  'you’re': 'you be',
  "you've": 'ye',
  'you’ve': 'ye',
  your: 'yer',
  yup: 'aye',

  // These translations were inspired by Facebook Pirate translations.
  around: 'roundabouts',
  cancel: 'retreat',
  event: 'grog fest',
  except: "exceptin'",
  jarnuary: 'januarrry',
  feburuary: 'februarrry',
  march: 'marrrch',
  april: "Month o' Showers",
  // may: "Month o' May",
  june: "Merry Month o' June",
  july: 'jul-aye',
  august: 'arrrgust',
  september: 'Septembarrr',
  october: 'Octobarrr',
  november: 'Novembarrr',
  december: 'Decembarrr',
  sunday: "Day o' the Sun",
  monday: 'munday',
  tuesday: "toos'day",
  wednesday: "Ondin's day",
  thursday: 'tharrrsday',
  saturday: 'satarrrday',
  today: "t'day",
  post: "scrawlin'",
  tweet: "scrawlin'",
  video: 'bewitched portrait',
  location: "port o' call",

  // Other thoughts
  file: 'parchment',
  browser: "bewtch'd portal",
  code: 'spells',
  program: 'magic spell',
  dependencies: 'dependen-seas',
  starter: 'starrrter',
};

function translateWord(word: string) {
  const pirateWord = dictionary[word.toLowerCase()];
  if (pirateWord === undefined) return word;
  return applyCase(word, pirateWord);
}

// Take the case from wordA and apply it to wordB
function applyCase(wordA: string, wordB: string) {
  // Exception to avoid words like "I" being converted to "ME"
  if (wordA.length === 1 && wordB.length !== 1) return wordB;
  // Uppercase
  if (wordA === wordA.toUpperCase()) return wordB.toUpperCase();
  // Lowercase
  if (wordA === wordA.toLowerCase()) return wordB.toLowerCase();
  // Capitialized
  const firstChar = wordA.slice(0, 1);
  const otherChars = wordA.slice(1);
  if (
    firstChar === firstChar.toUpperCase() &&
    otherChars === otherChars.toLowerCase()
  ) {
    return wordB.slice(0, 1).toUpperCase() + wordB.slice(1).toLowerCase();
  }
  // Other cases
  return wordB;
}

function isLetter(character: string) {
  if (character.search(/[a-zA-Z'’-]/) === -1) return false;
  return true;
}

export function translate(text: string) {
  let translatedText = '';

  // Loop through the text, one character at a time.
  let word = '';
  for (let i = 0; i < text.length; i += 1) {
    const character = text[i];
    // If the char is a letter, then we are in the middle of a word, so we
    // should accumulate the letter into the word variable
    if (isLetter(character)) {
      word += character;
    }
    // If the char is not a letter, then we hit the end of a word, so we
    // should translate the current word and add it to the translation
    else {
      if (word != '') {
        // If we've just finished a word, translate it
        const pirateWord = translateWord(word);
        translatedText += pirateWord;
        word = '';
      }
      translatedText += character; // Add the non-letter character
    }
  }

  // If we ended the loop before translating a word, then translate the final
  // word and add it to the translation.
  if (word !== '') translatedText += translateWord(word);

  return translatedText;
}
